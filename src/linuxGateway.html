<!doctype html>
<html lang="en">

    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Bohao Chu, and Bootstrap contributors">
    <title>Linux Gateway | Bohao Chu</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom style sheet -->
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:700%7CNunito:300,600" rel="stylesheet">

    <!--Title Icon-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    </head>


    <body>

        <header class="fixed-top header"></header>

		<main>
			<div class="section px-0">
				<div id="post-header" class="page-header pt-5" style="background-image: url('assets/img/lora/bg.png'); background-position-y: 75%; background-position-x: 93%; background-size: auto 70%">
					<div class="container">
						<div class="row">
							<div class="col-md-10 col-sm-11 post-meta">
								<a class="post-category cat-2" href="#">Machine Learning</a>
								<span class="post-date">Oct 3, 2022 </span>
								<br><br>
								<h1>Linux Gateway With LoRa and 4G</h1>
								<h3 class="text-light pt-3">
									Embedded Linux Gateway for LoRaWAN Networking and Data Transfer over 4G.
								</h3>
								<p>
									<span class="text-light">
										Bohao Chu, Yuting Jia, Yangjie Cao
									</span>
								</p>
								<button type="button" class="btn btn-dark btn-lg btn-circle me-3">
                                    <span class="fa fa-file-pdf-o"></span>
                                </button>
								<button type="button" class="btn btn-dark btn-lg btn-circle">
                                    <span class="fa fa-graduation-cap"></span>
                                </button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- POST MAIN -->
						<div class="col-md-8 pe-5">

							<h3>INTRODUCTION</h3>

							<div class="section-row">
								<figure class="figure-img text-center">
									<img class="img-responsive" src="assets/img/lora/arch.png" alt="" width="100%">
									<p class="px-3 pt-3 text-center">
										<small><strong>Figure 1.</strong> Architecture of Our Embedded Linux Gateway.</small>
									</p>
								</figure>
							</div>

							<div class="row">
								<h4>BACKGROUND</h4>
								<p>
									In many scenarios, we need to collect data within an area, such as temperature in a city, or fire alarms in a building. With the rapid popularization of the Internet of Things technology, more and more terminal devices support the data networking function. Therefore, we can quickly network in an area. However, in the face of various types of terminal devices with different standards, the data platform cannot be compatible with every type of device. The gateway can help us solve this problem. It acts as a bridge between the node and the data platform. It reloads the received node data and accesses it to the data platform in the format required by the data platform.
								</p>

								<h4>MOTIVATION</h4>
								<p>
									Based on mature wireless communication technologies, multiple networking modes are available, such as Wi-Fi, Bluetooth, ZigBee, LoRa, and NB-IoT. In regional networking, we need to pay attention to parameters such as cost, maximum transmission distance, power consumption, and penetration rate. In comparison, LoRa excels in all of these areas. Therefore, in this work, we design a LoRa gateway that can cover a radius of no more than 15 km (ideal theoretical value) and reload node data to the data platform through the 4G cellular network in the format required by the data platform.
								</p>
								<div class="row">
									<table class="table table-striped table-dark fs-6 mx-2">
										<tr>
										  <th>Technology</th>
										  <th>Frequency Band</th>
										  <th>Max. Trans. Distance</th>
										  <th>Max. Trans. Rate</th>
										  <th>Network Topology</th>
										  <th>Safety</th>
										</tr>
										<tr>
										  <td>LoRaWAN</td>
										  <td>868MHz, 915MHz</td>
										  <td>15km</td>
										  <td>300bps to 5.5kpbs</td>
										  <td>Start or Mix</td>
										  <td>AES-128</td>
										</tr>
										<tr>
											<td>ZigBee</td>
											<td>2.4GHz</td>
											<td>100m</td>
											<td>250kbps</td>
											<td>Mesh</td>
											<td>AES-128</td>
										</tr>
										<tr>
											<td>WiFi</td>
											<td>2.4GHz, 5GHz</td>
											<td>100m</td>
											<td>10Mbps to 1Gbps</td>
											<td>P2P</td>
											<td>WPA2</td>
										</tr>
										<tr>
											<td>NB-IoT</td>
											<td>800MHz to 2.2GHz</td>
											<td>10km</td>
											<td>250kbps</td>
											<td>Start</td>
											<td>AES</td>
										</tr>
										
									</table>
								</div>
								

								<h3 class="mt-4">METHOD</h3>
								<p>
									This is my first experience with embedded Linux systems, so Linux system porting takes up most of the work. This chapter consists of two parts. The first part explains how we build an embedded Linux system, and the second part describes how we build a gateway application. Note that the following is based on the  NXP.iMX6ULL processor.
								</p>

								<h4>Embedded Linux Operating System</h4>
								<p>
									From the perspective of developers, Linux consists of three parts: Boot Loader, Linux Kernel, and Root File System. The Boot Loader and Linux Kernel are closely related to hardware.
								</p>

								<span href="" class="text-muted">1. U-Boot</span>
								<figure class="row">
									<img src="assets/img/lora/uboot-3.png" width="100%">
								</figure>

								<p>
									The BootLoader we use is U-Boot, which is short for Universal Boot Loader. It is an open-source project that complies with the GPL and is maintained by Wolfgang Denk of the DENX software work center in Germany. It supports multiple processors, including ARM, x86, MIPS, and RISCV. U-Boot is essentially a bare-metal program, which is similar to a single-chip microcomputer program. U-Boot uses assembly language and C language to operate some registers to initialize some peripherals, such as serial ports, networks, and DDR, and then loads the kernel program from the flash memory to the DDR to start the kernel. At the same time, control of the CPU is handed over to the kernel program, and its life cycle ends. It's just a complex and huge bare-metal program.
								</p>
								
								<figure class="row">
									<img src="assets/img/lora/uboot-1.png" class="col-md-6">
									<img src="assets/img/lora/uboot-2.png" class="col-md-6">
								</figure>
								
								<span>
									A. Why initialize these peripherals?
								</span>
								<p>
									During development, we need to change the image system frequently. However, we do not always need to burn the kernel to the flash memory for debugging. We can directly load the kernel program from the PC to the DDR through the network (TFTP protocol) and start the system.
								</p>
								<span>
									B. What are the U-Boot boot modes?
								</span>
								<p>
									The U-Boot supports three boot modes, which are determined by the BOOT_MODE register. The BOOT_MODE can be controlled by the I/O pin. In the internal boot mode, the BOOT_CFG register controls the flash memory and some parameters.
								</p>
								<span>
									C. How does the CPU start the U-Boot?
								</span>
								<p>
									U-Boot is not the first program to be started after the CPU is powered on. The NXP.iMX6ULL processor has a 96K ROM and 128K RAM. The ROM contains a program that cannot be modified after delivery. The program is located at 0x00000000. Therefore, it is the first program specified after power-up. It initializes the flash interface, USB interface, and DDR. SoC vendors may use different DDR peripherals. Therefore, the BOOT ROM program loads the DDR information from the flash memory, initializes the DDR, and loads the U-Boot from the flash memory to the DDR.
								</p>


								
								<a href="https://linux-kernel-labs.github.io/refs/heads/master/lectures/intro.html" class="text-muted">2. Kernel</a>






								<h4>Gateway Applications</h4>
								<p>
									In this work, we explore the concept of <strong>Edge Computing Sensor Kit (ECSK)</strong> based on the former work. We designed a new type of hardware that integrates several different types of sensors, including a camera and a microphone, on a small board, while adding a powerful processor and Tensor Processing Unit, which allows algorithmic models and applications to run directly on it instead of on a remote server. Each sensor has a task channel, and multiple sensors can independently perform data sampling and feature extraction with concurrency. Feature data from different sensor channels are used to achieve real-time recognition of general activities in the environment (e.g., robotic arm movement) by a machine learning based multi-sensor information fusion algorithm.
								</p>
								<h3 class="mt-4">RESULT</h3>
								<p>
									After completing the model training, we deployed our system in six real scenarios, and the deployment location of ECSK. In each scenario, ECSK continued the identification for each real-time activity, and we kept 50 positive and negative examples for each activity to ensure a balanced sample. We counted the confusion matrix, accuracy, precision, recall and F1 score for the 27 activities in scenarios, and finally the F1 score was used as the reference metric. We rounded all the values.
								</p>
					

								<h3 class="mt-4">
									KEYWORDS
								</h3>
								<p class="text-dark">
									<strong>
										Edge Computing Sensor Kit, Information Fusion, Machine Learning, Real-time Activity Recognition, Digital Twin, Data Visualization.
									</strong>
								</p>

							</div>

						</div>

						<!-- POST ASIDE -->
						<div class="col-md-4">
							<div class="row mb-3">
								<h3>MATERIALS</h3>

								<h4>HARDWARE</h4>
								<figure class="figure-img text-center">
									<img class="img-responsive" src="assets/img/ecsk/sensor_board_layout.png" alt="" width="100%">
									<p class="px-3 pt-3 text-center">
										<small ><strong>Figure 6.</strong> Schematic of our sensor board and the layout of the sensors and other modules.</small>
									</p>
								</figure>

								<p>
									To facilitate the deployment of our Edge Computing Sensor Kit, we designed it to be as small as possible without compromising its performance. In the end, the size of our board was kept to 40 mm wide and 55 mm long, which is smaller than a bank card. 
								</p>
								<figure class="figure-img text-center">
									<img class="img-responsive" src="assets/img/ecsk/Top.jpg" alt="" width="100%">
									<p class="px-3  pt-3 text-center">
										<small><strong>Figure 7.</strong> Photo of Edge Computing Sensor Kit.</small>
									</p>
								</figure>
							</div>
							
							<div class="row mb-3">
								<h4>DIGITAL TWIN</h4>
								<p>
									A digital twin is a virtual model that is designed to accurately reflect a physical object. For example, a wind turbine is equipped with various sensors related to important functional areas that generate data about different aspects of the physical object’s performance, such as energy output, temperature, weather conditions, etc. This data is then forwarded to a processing system and applied to a digital copy.
								</p>
								<figure class="figure-img text-center col-6">
									<img class="img-responsive" src="assets/img/ecsk/cnc3D.png" alt="" width="100%">
								</figure>
								<figure class="col-6">
									<img class="img-responsive" src="assets/img/ecsk/3053D.png" alt="" width="100%">
								</figure>
								<p class="px-3  pt-3 text-center">
									<small><strong>Figure 8.</strong> Industrial machine tools in the virtual world.</small>
								</p>
							</div>

							<div class="row">
								<h4>EVALUATION</h4>
								<figure class="">
									<img class="img-responsive" src="assets/img/ecsk/table-1.png" alt="" width="100%">
									<img class="img-responsive" src="assets/img/ecsk/table-2.png" alt="" width="100%">
									<img class="img-responsive" src="assets/img/ecsk/table-3.png" alt="" width="100%">
									<img class="img-responsive" src="assets/img/ecsk/table-4.png" alt="" width="100%">
									<img class="img-responsive" src="assets/img/ecsk/table-5.png" alt="" width="100%">
									<img class="img-responsive" src="assets/img/ecsk/table-6.png" alt="" width="100%">
								</figure>

								<p class="px-3  pt-3 text-center">
									<small><strong>Table 1-6.</strong> Model evaluation results in 6 scenarios.</small>
								</p>
							</div>

							<div class="row mb-3">
								<h4>EXPERIMENT</h4>
								<p class="text-break">
									In traditional IoT scenarios, Specific-Purpose Sensor (SPS) or Distributed Multi-Sensor (DMS) are usually deployed directly on different locations or objects to sense diverse purposes.
								</p>

								<iframe width="100%" height="250px" src="https://www.youtube.com/embed/Z8w50vlm_s4" style="border:none" allowfullscreen></iframe>
								<p class="px-3  pt-3 text-center">
									<small><strong>Video 1.</strong> Someone famous in Source Title.</small>
								</p>



								<iframe width="100%" height="250px" src="https://www.youtube.com/embed/PNvg8WORgbg" frameborder="0" allowfullscreen></iframe>
								<p class="px-3  pt-3 text-center">
									<small><strong>Video 2.</strong> Someone famous in Source Title.</small>
								</p>
							</div>

							

							<div class="row mb-3">
								<h4>ARCHIVE</h4>
								<ul>
									<li><a href="#">Wei, Fuyin, Fei Xiang, Bohao Chu, and Bernd Noche. "Feature fusion algorithm based on modular scalable integrated sensor behavior recognition." Logistics Journal: Proceedings 2021, no. 17 (2021).</a></li>
								</ul>
							</div>




						</div>
						<!-- /aside -->
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /section -->
		</main>


        <footer class="section bg-secondary mt-5 footer"></footer>
        <script src="assets/js/bootstrap.bundle.min.js"></script>
        <script>
            addEventListener("DOMContentLoaded", function() {
                $(".header").load("components/header.html",function(){});
                $(".footer").load("components/footer.html",function(){});
            });
        </script>

    </body>
</html>
